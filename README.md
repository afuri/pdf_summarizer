# PDF-summarizer

Эта программа позволяет извлекать текст из PDF-файлов с помощью pdfminer.six и отправлять его вместе с пользовательским запросом (prompt) в Groq API (OpenAI-совместимый endpoint) для получения структурированного ответа в формате JSON.

## Установка

### 1. Клонируйте репозиторий и перейдите в папку проекта
```sh
cd /path/to/pdf_summarizer
```

### 2. Создайте и активируйте виртуальное окружение (рекомендуется)
```sh
python -m venv .venv
source .venv/bin/activate  # Linux/macOS
.venv\Scripts\activate    # Windows
```

### 3. Установите зависимости
```sh
pip install pdfminer.six requests python-dotenv
```
или

```sh
pip install -r requirements.txt
```

или, если установлен UV

```sh
uv sync
```


### 4. Создайте файл .env с вашим Groq API ключом
В корне проекта создайте файл `.env` со следующим содержимым:
```
GROQ_API_KEY=your_groq_api_key
```

## Принципы работы
- После запуска программа выводит приветствие и информацию о версии и используемой LLM.
- Запрашивает у пользователя путь к PDF-файлу.
- Проверяет существование файла.
- Запрашивает у пользователя текстовый prompt (запрос).
- Извлекает текст из PDF с помощью pdfminer.six.
- Загружает ключ GROQ_API_KEY из файла .env с помощью python-dotenv.
- Формирует запрос к Groq API (OpenAI-совместимый endpoint), передавая prompt и текст документа.
- Получает и выводит структурированный ответ (JSON) в консоль.
- После вывода результата спрашивает, нужно ли сохранить результат в файл (Y/N).
- Если пользователь выбирает "Y" или "y", результат сохраняется в файл result.json, либо result_1.json, result_2.json и т.д., если файл уже существует.
- Если пользователь выбирает "N" или любой другой ответ — программа завершает работу.

## Использование

### Пример запуска
```sh
python main.py
```

### Пример диалога
```
Программа PDF-Summarizer v.1.0
Программа использует LLM llama4 с ограничением 30000
Введите путь к  pdf файлу: temp.pdf
Введите запрос (promt): Сделай краткое резюме документа
{
  "summary": "Документ содержит ..."
}
Вы хотите сохранить результат? Y/N
Результат сохранён в файл: result.json
```
Для более точного ответа возможен следующий промт: summarize the text and make a list of advice in russian

## Возможные ошибки
- `Error: PDF file '...' does not exist` — файл не найден
- `Error: GROQ_API_KEY not set in .env file` — не задан ключ API в .env
- `Error: Failed to extract PDF text: ...` — не удалось извлечь текст из PDF
- `{"error": "API call failed: ...", ...}` — ошибка при обращении к API
- `Ошибка при сохранении файла: ...` — ошибка при записи результата

## Зависимости
- Python 3.8+
- pdfminer.six
- requests
- python-dotenv

## Примечания
- Ключ Groq API можно получить на https://console.groq.com/ (или в вашей панели управления Groq).
- Программа работает только с текстовыми PDF (сканированные изображения не поддерживаются без OCR).
- Для больших PDF обработка может занять время.
- Файл .env не должен попадать в систему контроля версий (добавьте его в .gitignore).

---


## Безопасность
- Все содержимое PDF и ваш prompt отправляются на внешний сервер Groq API. Не используйте программу для обработки секретных или персональных данных, если не уверены в политике безопасности Groq API.
- Ключ GROQ_API_KEY хранится в файле .env. Не публикуйте этот файл и храните его в недоступном для других пользователей месте.
- Не публикуйте файлы result.json и их копии, если они содержат конфиденциальную информацию.
- Программа не выполняет команды, не открывает порты и не запускает сервер — риск взлома через пользовательский ввод минимален.
- Регулярно обновляйте зависимости (pdfminer.six, requests, python-dotenv) для защиты от уязвимостей.
- Используйте отдельный API-ключ для этой программы.

---


**Если возникли вопросы или проблемы — создайте issue или обратитесь к автору.**
